{
    "sourceFile": "resources/views/pages/backend/dashboard.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1732793741098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1732793741098,
            "name": "Commit-0",
            "content": "<x-app-layout>\n    <x-sidebar/>\n    @if (session('success'))\n    <x-succes-notification>\n        {{ session('success') }}\n    </x-succes-notification>\n    <script>\n        document.addEventListener('DOMContentLoaded', function () {\n            const notification = document.getElementById('success-notification-content');\n            const closeBtn = document.getElementById('close-notification');\n            \n            notification.classList.remove('hidden');\n            \n            closeBtn.addEventListener('click', () => {\n                notification.classList.add('hidden');\n            });\n        });\n    </script>\n    @endif\n    <x-content-page>\n\n        {{--  <div class=\"flex items-center px-4 py-2 text-gray-500 bg-[#fffe4a70] rounded-t-lg shadow-lg\">\n            <h1 class=\"flex-1 text-2xl font-bold\">{{$pageTitle}}</h1>\n        </div>  --}}\n        \n        <div class=\"flex-1 p-6\">\n\n            <!-- Main Content -->\n            <div class=\"grid grid-cols-4 md:grid-cols-4 lg:grid-cols-4 gap-4\">\n                <!-- Card 1 -->\n                <div class=\"w-full\">\n                    <div class=\"bg-white shadow-xl rounded-2xl p-3\">\n                        <div class=\"flex justify-between\">\n                            <div>\n                                <p class=\"text-sm font-semibold\">{{__('Mutualistes')}}</p>\n                                <h5 class=\"font-bold\">{{$mutualistesCount}}</h5>\n                            </div>\n                            <div class=\"w-12 h-12 flex items-center justify-center rounded-lg bg-gradient-to-tl from-[#4000FF] to-[#e0d9f6] shadow-lg\">\n                                <i class=\"fa fa-users text-white text-lg\"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Card 2 -->\n                <div class=\"w-full\">\n                    <div class=\"bg-white shadow-xl rounded-2xl p-3\">\n                        <div class=\"flex justify-between\">\n                            <div>\n                                <p class=\"text-sm font-semibold\">{{__('Adhérents')}}</p>\n                                <h5 class=\"font-bold\">{{$adherentsCount}}</h5>\n                            </div>\n                            <div class=\"w-12 h-12 flex items-center justify-center rounded-lg bg-gradient-to-tl from-[#4000FF] to-[#e0d9f6] shadow-lg\">\n                                <i class=\"fa fa-user text-white text-lg\"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Card 3 -->\n                <div class=\"w-full\">\n                    <div class=\"bg-white shadow-xl rounded-2xl p-3\">\n                        <div class=\"flex justify-between\">\n                            <div>\n                                <p class=\"text-sm font-semibold\">{{__('Ayants-droit')}}</p>\n                                <h5 class=\"font-bold\">{{$ayantsDroitCount}}</h5>\n                            </div>\n                            <div class=\"w-12 h-12 flex items-center justify-center rounded-lg bg-gradient-to-tl from-[#4000FF] to-[#e0d9f6] shadow-lg\">\n                                <i class=\"fa fa-users text-white text-lg\"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <!-- Card 4 -->\n\n                <div class=\"w-full  \">\n                    <div class=\"bg-white shadow-xl rounded-2xl p-3\">\n                        <div class=\"flex justify-between\">\n                            <div>\n                                <p class=\"text-sm font-semibold\">{{__('Paiements')}}</p>\n                                <h5 class=\"font-bold\">{{$validatedPrestationsCount}}</h5>\n                            </div>\n                            <div class=\"w-12 h-12 flex items-center justify-center rounded-lg bg-gradient-to-tl from-[#4000FF] to-[#e0d9f6] shadow-lg\">\n                                <i class=\"fa fa-money text-white text-lg\"></i>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n    \n            </div>\n\n            <div class=\"mt-6 grid grid-cols-3 lg:grid-cols-3 gap-6\">\n                <div class=\" col-span-1 row-span-1 bg-white shadow-lg rounded-lg\">\n                    <div class=\"relative flex items-center justify-center rounded-lg bg-cover bg-center h-full\" style=\"background-image: url('{{ asset('images/background1.jpg') }}');\">\n                        <div class=\"absolute inset-0 bg-black opacity-30 rounded-lg\"></div>\n                        \n                        <div class=\"relative z-10 text-white  p-6\">\n                            \n                            <div class=\"flex items-center space-x-2 w-full text-lg\">\n                                {{--  <img src=\"{{ asset('images/welcome-48.png') }}\" alt=\"Icône calendrier\" class=\"w-12 h-12\">  --}}\n                                <div class=\" flex-none\">\n                                    <div>\n                                        <h1 class=\"font-bold\">\n                                            {{ __('Bienvenue, ') }}\n                                        </h1>\n                                        <!-- <span class=\"font-semibold\">\n                                            {{ Auth::user()->name }}\n                                        </span> -->\n\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"flex text-gray-200 items-center  mt-4\">\n                                <i class=\"fa fa-calendar mr-2\"></i>\n                                <span id=\"current-date-time\" class=\"text-base font-medium\">\n                                    {{ $currentDateTime->format('l, j F Y') }}\n                                </span>\n                            </div>\n                            \n                            \n                        </div>\n                    </div>\n                    \n                </div>\n                <div class=\" col-span-2 row-span-3 bg-white p-6 shadow-lg rounded-lg\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Sommes dépensées  pour prestations</h3>\n                    <div style=\"height: 400px\" class=\"flex justify-center items-center\">\n                        <canvas id=\"prestationsPieChart\" class=\" \"></canvas>  \n                    </div>                        \n                    <script>\n                        const ctx = document.getElementById('prestationsPieChart').getContext('2d');\n                        const prestationsCostsByAct = @json($prestationsCostsByAct);\n                    \n                        new Chart(ctx, {\n                            type: 'pie',\n                            data: {\n                                labels: Object.keys(prestationsCostsByAct),  \n                                datasets: [{\n                                    label: 'Répartition des coûts des prestations par acte',\n                                    data: Object.values(prestationsCostsByAct),  \n                                    backgroundColor: [\n                                        'rgb(5,92,157)', \n                                        'rgb(104,187,227)',  \n                                        'rgb(14,134,212)',  \n                                        'rgb(0,59,115)', \n                                        'rgb(65,114,159)',\n                                        'rgb(65,114,109)',\n                                        'rgb(65,14,109)',\n                                        'rgb(6,114,19)', \n                                        'rgb(160,114,199)',\n                                        'rgb(65,14,199)',\n\n  \n                                    ],\n                                    borderColor: [\n                                        'rgb(5,92,157)', \n                                        'rgb(104,187,227)',  \n                                        'rgb(14,134,212)',  \n                                        'rgb(0,59,115)', \n                                        'rgb(65,114,159)',\n                                        'rgb(65,114,109)',\n                                        'rgb(65,14,109)',\n                                        'rgb(6,114,19)', \n                                        'rgb(160,114,199)',\n                                        'rgb(65,14,199)',\n  \n                                    ],\n                                    borderWidth: 1\n                                }]\n                            },\n                            options: {\n                                responsive: true,\n                                plugins: {\n                                    legend: {\n                                        position: 'left',  \n                                    },\n                                   \n                                },\n                                \n                            }\n                        });\n                    </script>\n                </div>\n                \n                <div class=\"col-span-1 row-span-2 bg-white p-6 shadow-lg rounded-lg\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">États des paiements</h3>\n\n                    <ul class=\"space-y-4 mt-4\">\n                        <!-- Paiements non effectués -->\n                        <li class=\"flex items-center p-4 border border-gray-200 rounded-lg bg-gray-50 hover:bg-gray-100 transition duration-200\">\n                            <div class=\"flex-shrink-0\">\n                                <div class=\"w-12 h-12 flex items-center justify-center rounded-full bg-blue-100 text-blue-500 text-lg font-bold\">\n                                    {{$pourcentageInvalidatedPrestationsCount}}%\n                                </div>\n                            </div>\n                            <div class=\"ml-4\">\n                                <h3 class=\"text-sm font-semibold text-gray-900\">Non effectués</h3>\n                            </div>\n                        </li>\n                \n                        <!-- Paiements effectués -->\n                        <li class=\"flex items-center p-4 border border-gray-200 rounded-lg bg-gray-50 hover:bg-gray-100 transition duration-200\">\n                            <div class=\"flex-shrink-0\">\n                                <div class=\"w-12 h-12 flex items-center justify-center rounded-full bg-purple-100 text-purple-500 text-lg font-bold\">\n                                    {{$pourcentageValidatedPrestationsCount}}%\n                                </div>\n                            </div>\n                            <div class=\"ml-4\">\n                                <h3 class=\"text-sm font-semibold text-gray-900\">Effectués</h3>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n                \n                \n                \n            </div>\n            <div class=\"mt-6 grid grid-cols-2 lg:grid-cols-2 gap-6\">\n                <!-- Chart 1: Line Chart -->\n                <div class=\"bg-white p-6 shadow-lg rounded-lg\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Sommes dépensées par mois</h3>\n                    <canvas id=\"lineChart\"></canvas>\n                </div>\n\n                <!-- Recent Activity -->\n                <div class=\"bg-white p-6 shadow-lg rounded-lg\">\n                    <h3 class=\"text-lg font-semibold text-gray-900\">Dernières prestations</h3>\n\n                    <div class=\"relative overflow-x-auto mt-4 shadow-md sm:rounded-lg\">\n                        <table class=\"table-auto w-full rounded-md\">\n                            <thead class=\"rounded-md\">\n                                <tr class=\"bg-gray-200\">\n                                    <th class=\"px-4 py-2\">ID</th>\n                                    \n                                    <th class=\"px-4 py-2\">Montant</th>\n                                    <th class=\"px-4 py-2\">Paiement</th>\n\n                                </tr>\n                            </thead>\n                            <tbody>\n                                @foreach ($prestationsEnAttente as $prestation)\n                                <tr>\n                                    <td class=\"border px-4 py-2\">{{ $prestation->idPrestation }}</td>\n                                    <td class=\"border text-right px-4 py-2\">\n                                        <span class=\"bg-blue-100 text-primary1  text-xs font-medium inline-flex items-center  px-2.5 py-1 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400\">\n                                            {{ $prestation->montant }}\n                                        </span>\n                                        \n                                    </td>\n                                    <td class=\"border px-4 py-2\">\n                                        @if ($prestation->etat_paiement === 1)\n                                        <span class=\"flex items-center justify-center p-2 text-green-600 \">\n                                            <i class=\" fa fa-check \" style=\"font-size:20px;\"></i>\n                                        </span>                                             \n                                        @else\n                                        <span class=\"flex items-center justify-center text-orange-600\">\n                                            <i class=\"fa fa-hourglass-half\" style=\"font-size:20px;\" aria-hidden=\"true\"></i>\n                                        </span> \n                                        @endif\n\n                                    </td>\n\n                                </tr>\n                                @endforeach\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                \n            </div>\n                           \n        </div>\n       \n    </x-content-page>\n    \n    \n    <!-- Chart.js Scripts -->\n    \n    <script>\n        var ctxLine = document.getElementById('lineChart').getContext('2d');\n        var lineChart = new Chart(ctxLine, {\n            type: 'line',\n            data: {\n                labels: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],\n                datasets: [{\n                    label: 'Paiements Mensuels',\n                    data: @json($monthlyPayments),\n                    borderColor: 'rgba(99, 102, 241, 1)',\n                    backgroundColor: 'rgba(99, 102, 241, 0.1)',\n                    fill: true,\n                    tension: 0.4,\n                    pointBackgroundColor: 'rgba(99, 102, 241, 1)',\n                    pointBorderColor: '#ffffff',\n                    pointHoverRadius: 6,\n                    pointRadius: 4\n                }]\n            },\n            options: {\n                responsive: true,\n                scales: {\n                    x: {\n                        grid: {\n                            display: false,\n                        },\n                        ticks: {\n                            color: '#6B7280',\n                            font: {\n                                family: 'Inter, sans-serif',\n                                size: 12,\n                                weight: '500',\n                            },\n                            maxRotation: 0, // Empêche l'inclinaison des labels\n                            minRotation: 0 // Garde les labels droits\n                        }\n                    },\n                    y: {\n                        grid: {\n                            borderDash: [5, 5],\n                            color: 'rgba(229, 231, 235, 0.5)',\n                        },\n                        ticks: {\n                            color: '#6B7280',\n                            font: {\n                                family: 'Inter, sans-serif',\n                                size: 12,\n                                weight: '500',\n                            }\n                        }\n                    }\n                },\n                plugins: {\n                    legend: {\n                        display: true,\n                        labels: {\n                            color: '#4B5563',\n                            font: {\n                                family: 'Inter, sans-serif',\n                                size: 14,\n                                weight: '600',\n                            }\n                        }\n                    },\n                    tooltip: {\n                        backgroundColor: '#4F46E5',\n                        titleColor: '#fff',\n                        bodyColor: '#fff',\n                        titleFont: {\n                            family: 'Inter, sans-serif',\n                            size: 14,\n                            weight: '600',\n                        },\n                        bodyFont: {\n                            family: 'Inter, sans-serif',\n                            size: 12,\n                            weight: '400',\n                        },\n                        padding: 12,\n                        cornerRadius: 8\n                    }\n                }\n            }\n        });\n    </script>\n</x-app-layout>\n\n\n"
        }
    ]
}