{
    "sourceFile": "resources/views/pages/backend/prestations/show.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1732793741096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1732793741096,
            "name": "Commit-0",
            "content": "<x-app-layout>\n    <x-sidebar/>\n    <x-content-page>\n\n        <div class=\"flex-1 p-6\">\n            <div class=\"py-5\">\n                <h1 class=\"text-xl font-bold text-center text-primary1\">Détails de la prestation</h1>\n                <p class=\"mt-1 text-sm text-gray-500\">\n                    Vous avez ici toutes les informations de la prestation soumise. Vous pouvez la valider si elle est acceptée ou la rejeter.\n                </p>\n            </div>\n            <!-- Colonne 1: Informations de la prestation -->\n            <div class=\"p-6 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n                <div class=\"flex justify-end\">\n                    <span class=\"bg-blue-100 text-primary1  text-xs font-medium inline-flex items-center  px-2.5 py-1 rounded dark:bg-gray-700 dark:text-blue-400 border border-blue-400\">\n                        <i  class=\" fa fa-check me-1.5\"></i>\n                        {{ ucfirst($prestation->validite) }}\n                    </span>\n                </div>\n                @role('controleur|agentsaisie')\n                <div class=\"mt-3 overflow-x-auto\">\n                    <table class=\"min-w-full border border-collapse border-gray-300\">\n                        <thead>\n                            <tr class=\"bg-gray-200\">\n                                <th class=\"px-4 py-2 border border-gray-300\">Date de l’acte</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Nom</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Prénom</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Code</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Bénéficiaire</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Sexe/Age</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Centre de santé</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Acte</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Montant Total</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Montant Modérateur</th>\n                                <th class=\"px-4 py-2 border border-gray-300\">Montant Mupol</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->date }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->adherentNom }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->adherentPrenom }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->adherentCode }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->beneficiaire }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->adherentSexe }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->centre }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->acte }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ number_format($prestation->montant, 2, ',', ' ') }}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->montant*20/100}}</td>\n                                <td class=\"px-4 py-2 border border-gray-300 whitespace-nowrap\">{{ $prestation->montant*80/100 }}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                @endrole\n                @role('comptable')\n                <div class=\"grid grid-cols-2 gap-5 mt-3 md:grid-cols-2\">\n                    <div>\n                        <x-card title=\"Informations prestation\">\n                            <div class=\"flex justify-between text-sm font-medium text-gray-500\">\n                                <span>Date</span>\n                                <span class=\"text-gray-900\">{{ $prestation->date }}</span>\n                            </div>\n                        \n                            <div class=\"flex justify-between text-sm font-medium text-gray-500 mt-4\">\n                                <span>Acte</span>\n                                <span class=\"text-gray-900\">{{ $prestation->acte }}</span>\n                            </div>\n                        \n                            <div class=\"flex justify-between text-sm font-medium text-gray-500 mt-4\">\n                                <span>Type</span>\n                                <span class=\"text-gray-900\">{{ $prestation->type }}</span>\n                            </div>\n                        \n                            <div class=\"flex justify-between text-sm font-medium text-gray-500 mt-4\">\n                                <span>Sous-Type</span>\n                                <span class=\"text-gray-900\">{{ $prestation->sous_type ?? 'N/A' }}</span>\n                            </div>\n                        \n                            <div class=\"flex justify-between text-sm font-medium text-gray-500 mt-4\">\n                                <span>Centre de santé</span>\n                                <span class=\"text-gray-900\">{{ $prestation->centre }}</span>\n                            </div>\n                        </x-card>\n                        \n                    </div>\n                    <div>\n                        <x-card title=\"Montants\">\n                            <div class=\"flex justify-between text-sm font-medium text-gray-500\">\n                                <span>Montant total</span>\n                                <span class=\"text-gray-900\">{{ $prestation->montant }}</span>\n                            </div>\n                            \n                            <div class=\"flex justify-between items-center text-sm font-medium text-gray-500 mt-4\">\n                                <span>Montant modérateur</span>\n                                <div class=\"flex items-center gap-2\">\n                                    <span class=\"text-gray-900\">{{ ($prestation->montant * 20) / 100 }}</span>\n                                    <span class=\"bg-blue-100 text-primary1 text-xs font-medium px-2.5 py-1 rounded border border-blue-400\">20%</span>\n                                </div>\n                            </div>\n                            \n                            <div class=\"flex justify-between items-center text-sm font-medium text-gray-500 mt-4\">\n                                <span>Montant mutuelle</span>\n                                <div class=\"flex items-center gap-2\">\n                                    <span class=\"text-gray-900\">{{ ($prestation->montant * 80) / 100 }}</span>\n                                    <span class=\"bg-blue-100 text-primary1 text-xs font-medium px-2.5 py-1 rounded border border-blue-400\">80%</span>\n                                </div>\n                            </div>\n                            \n                            <div class=\"flex justify-between items-center text-sm font-medium text-gray-500 mt-4\">\n                                <span>État de paiement</span>\n                                <div class=\"text-sm\">\n                                    @if ($prestation->etat_paiement === 1)\n                                        <span class=\"p-2 text-green-600 bg-green-200 border border-green-600 rounded-md shadow-sm\">Payé</span>\n                                    @else\n                                        <span class=\"p-2 text-red-600 bg-red-200 border border-red-600 rounded-md shadow-sm\">Non payé</span>\n                                    @endif\n                                </div>\n                            </div>\n                        </x-card>\n                        \n                    </div>    \n                    \n                </div>\n                @endrole\n               \n                @role('controleur|agentsaisie')\n                <div class=\"mt-4\">\n    \n                    <span class=\"mt-4 text-sm font-medium text-gray-500\">\n                        Preuves\n                    </span>\n                    <div class=\"grid-cols-3 py-3 sm:py-5 sm:grid sm:grid-cols-3 \">\n                        \n                        @foreach ($prestation->preuve as $index => $preuve)\n                            <div class=\"flex flex-wrap gap-2 py-3\">\n                                <a href=\"#\"\n                                \n                                onclick=\"showPDF('{{ URL::asset('storage/'.$preuve) }}'); return false;\">\n                                    <img src=\"{{ asset('images/pdf-80.png') }}\" alt=\"PDF\" width=\"150\" height=\"100\" class=\"p-2 border rounded-md\">\n                                    <p class=\"mt-2 text-sm font-thin text-center\">Preuve {{ $index + 1 }}</p>\n                                </a>\n                            </div>\n                        @endforeach\n                \n                    </div>  \n                    \n                    <!-- Main modal -->\n                    <div id=\"pdfModal\" tabindex=\"-1\" aria-hidden=\"true\" class=\"fixed inset-0 z-50 flex items-center justify-center hidden w-full h-full bg-black bg-opacity-50\">\n                        <div class=\"relative w-full h-full max-w-4xl p-4\">\n                            <!-- Modal content -->\n    \n                            <div class=\"relative flex flex-col h-full bg-white rounded-lg shadow dark:bg-gray-700\">\n                                <!-- Modal header -->\n                                <div class=\"flex justify-end p-2\">\n                                    <button type=\"button\" onclick=\"closePDFModal()\" class=\"inline-flex items-center justify-center p-2 text-sm text-gray-400 bg-transparent rounded-lg hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white\">\n                                        <svg class=\"w-3 h-3\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 14 14\">\n                                            <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6\"/>\n                                        </svg>\n                                        <span class=\"sr-only\">Close modal</span>\n                                    </button>\n                                </div>\n                                <!-- Modal body -->\n                                <div class=\"flex-1 p-2 md:p-4\">\n                                    <iframe id=\"pdfIframe\" src=\"\"  class=\"w-full h-full\"></iframe>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <script>\n                        function showPDF(pdfUrl) {\n                            var pdfModal = document.getElementById('pdfModal');\n                            var pdfIframe = document.getElementById('pdfIframe');\n                            \n                            pdfIframe.src = pdfUrl;\n                            \n                            pdfModal.classList.remove('hidden');\n                        }\n                    \n                        function closePDFModal() {\n                            var pdfModal = document.getElementById('pdfModal');\n                            var pdfIframe = document.getElementById('pdfIframe');\n                            pdfModal.classList.add('hidden');\n                            pdfIframe.src = '';\n                        }\n                    </script>\n                    \n                </div>\n                @endrole\n    \n            </div>\n            @role('controleur')\n            <div class=\"flex justify-around mt-6\">\n                <form action=\"{{ route('prestations.valider', ['id' => $prestation->id]) }}\" method=\"POST\" class=\"flex items-center p-2 text-green-700 rounded-md shadow-sm \">\n                    @csrf\n                    <x-primary-button type=\"submit\">\n                        <i class=\"fa fa-check\"></i>\n                        <span class=\"ml-2\">\n                            {{ __('Valider') }}\n                        </span>\n                    </x-primary-button>\n                    \n                </form>\n                <form action=\"{{ route('prestations.rejeter', ['id' => $prestation->id]) }}\" method=\"POST\" class=\"flex items-center p-2 text-red-700 rounded-md shadow-sm \">\n                    @csrf\n                    <x-primary-button type=\"submit\" class=\" bg-red-600\">\n                        <i class=\"fa fa-times\"></i>\n                        <span class=\"ml-2\">\n                            {{ __('Rejeter') }}\n                        </span>\n                    </x-primary-button>\n                   \n                </form>\n            </div>\n               \n            @endrole\n            \n            @role('comptable')\n            <div x-data=\"{ open: false }\">\n                <div class=\"flex justify-around mt-6\">\n                    <form action=\"{{ route('prestations.validerpaiement', ['id' => $prestation->id]) }}\" method=\"POST\" class=\"flex items-center p-2 text-green-700 rounded-md shadow-sm\">\n                        @csrf\n                        <x-primary-button @click=\"open = true\" type=\"submit\">\n                            <i class=\"fa fa-check\"></i>\n                            <span class=\"ml-2\">{{ __('Valider le paiement') }}</span>\n                        </x-primary-button>\n                    </form>\n\n                    @if ($prestation->etat_paiement == 1)\n                        <a href=\"{{ route('prestations.downloadReceipt', ['id' => $prestation->id]) }}\" class=\"flex items-center p-2 text-blue-700 rounded-md shadow-sm\">\n                            <x-primary-button>\n                                <i class=\"fa fa-download\"></i>\n                                <span class=\"ml-2\">{{ __('Télécharger reçu') }}</span>\n                            </x-primary-button>\n                        </a>\n                    @endif\n                </div>\n            \n            \n                <x-modal-confirm title=\"Confirmer le paiement\" icon=\"fa fa-money text-green-700\">\n                    {{__('Êtes-vous sûr de vouloir valider ce paiement ?')}}  \n                    <x-slot name=\"actions\">\n                        <form action=\"{{ route('prestations.validerpaiement', ['id' => $prestation->id]) }}\" method=\"POST\">\n                            @csrf\n                            <x-primary-button type=\"submit\" class=\"bg-green-700\">\n                                Confirmer\n                            </x-primary-button>\n                        </form>\n                    </x-slot>\n                </x-modal-confirm>\n            </div>\n            \n            @endrole\n    \n        </div>  \n    </x-content-page>\n  \n</x-app-layout>\n"
        }
    ]
}