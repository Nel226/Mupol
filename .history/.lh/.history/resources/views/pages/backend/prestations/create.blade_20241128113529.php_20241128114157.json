{
    "sourceFile": ".history/resources/views/pages/backend/prestations/create.blade_20241128113529.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1732793802737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1732793802737,
            "name": "Commit-0",
            "content": "<x-app-layout>\n    <x-sidebar/>\n    @if (session('success'))\n        <x-succes-notification>\n            {{ session('success') }}\n        </x-succes-notification>\n        <script>\n            document.addEventListener('DOMContentLoaded', function () {\n                const notification = document.getElementById('success-notification-content');\n                const closeBtn = document.getElementById('close-notification');\n                \n                notification.classList.remove('hidden');\n                \n                closeBtn.addEventListener('click', () => {\n                    notification.classList.add('hidden');\n                });\n            });\n        </script>\n    @endif\n    <x-content-page>\n        \n        <div class=\"flex-1 p-6\">\n            <div class=\"flex items-center px-4 py-2 text-gray-500 bg-[#fffe4a70] rounded-t-lg shadow-lg\">\n                <h1 class=\"flex-1 text-2xl font-bold\">Gestion des prestations</h1>\n            </div>\n            \n            <div class=\"p-6 mx-auto mt-4 bg-white rounded-lg shadow-lg \">\n                @if ($errors->any())\n                    <div class=\"px-6 py-3 mb-4 bg-red-200 border-red-700 rounded-md alert alert-danger\">\n                        <ul>\n                            @foreach ($errors->all() as $error)\n                                <li>{{ $error }}</li>\n                            @endforeach\n                        </ul>\n                    </div>\n                @endif\n    \n                <form   action=\"{{ route('prestations.store') }}\" method=\"POST\" enctype=\"multipart/form-data\" id=\"formPrestation\" class=\" max-w-2xl mx-auto adherent-form\">\n                    @csrf\n                    <div class=\" \">\n                        <!-- Premier formulaire -->\n                        <div class=\" mb-6 border-4 rounded-md border-primary1 py-2\">\n                            <div class=\"px-5\">\n                                <div class=\"flex items-center gap-4\">\n                                    <img src=\"{{ asset('images/medical.png') }}\" alt=\"Image medical\" class=\"h-40\">\n                                    <div>\n                                        <h2 class=\"mb-6 text-2xl font-bold\">Enregistrement de prestation </h2>\n                                        <span class=\"mb-4 italic\">Ce formulaire est conçu pour faciliter la saisie des informations concernant les actes médicaux.</span>\n                                    </div>\n                                    \n                                </div>\n                                \n                                <div class=\"form-content p-4\">\n                                    \n                                    <hr class=\" w-4/5  h-1 mx-auto mb-4 bg-primary1 border-0 rounded md:mb-10 dark:bg-gray-700\">\n    \n                                    <label for=\"adherentCode\" class=\"block mb-2 text-sm font-medium text-gray-900\">Sélectionnez le code du mutualiste :</label>\n                                    \n    \n                                    <select id=\"adherentCode\" name=\"adherentCode\" class=\"adherentCode block w-full p-2 !mb-6 border border-gray-300 rounded-lg\">\n                                        <option value=\"\">-- Choisir un code --</option>\n                                        @foreach ($adherents as $adherent)\n                                            <option value=\"{{ $adherent->code_carte }}\">{{ $adherent->code_carte }}</option>\n                                        @endforeach\n                                        @foreach ($ayantsDroitValides as $ayantDroit)\n                                            <option value=\"{{ $ayantDroit->code }}\">{{ $ayantDroit->code }}</option>\n                                        @endforeach\n                                    </select>\n                                    \n                                    <div id=\"adherentInfo\" class=\"adherentInfo mt-4 hidden\">\n                                        <div class=\"flex space-x-6\">\n                                            \n                                            <div class=\"w-1/2 \">\n                                                \n                                                <label for=\"adherentNom\" class=\"block mb-2 text-sm font-medium text-gray-900\">Nom :</label>\n                                                <input id=\"adherentNom\" name=\"adherentNom\" type=\"text\" class=\"adherentNom block w-full p-2 mb-4 bg-gray-200 border border-gray-300 rounded-lg \" readonly>\n                                            </div>\n                                            <div class=\"w-1/2 \">\n                                                <label for=\"adherentPrenom\" class=\"block mb-2 text-sm font-medium text-gray-900\">Prénom :</label>\n                                                <input id=\"adherentPrenom\" name=\"adherentPrenom\" type=\"text\" class=\"adherentPrenom w-full p-2 mb-4 bg-gray-200 border border-gray-300 rounded-lg bg-gray-200block\" readonly>\n                                            </div>\n                                        </div>\n                                        <div class=\"flex space-x-6\">\n                                            <div class=\"w-1/2 \">\n                                                <label for=\"adherentSexe\" class=\"block mb-2 text-sm font-medium text-gray-900\">Sexe :</label>\n                                                <input id=\"adherentSexe\" name=\"adherentSexe\" type=\"text\" class=\"adherentSexe block w-full p-2 mb-4 bg-gray-200 border border-gray-300 rounded-lg \" readonly>\n                                            </div>\n                                            <div class=\"w-1/2 \">\n                                                <label for=\"beneficiaire\" class=\"block mb-2 text-sm font-medium text-gray-900\">Statut du bénéficiaire :</label>\n                                                <input id=\"beneficiaire\" name=\"beneficiaire\" type=\"text\" class=\"beneficiaire block w-full p-2 mb-4 bg-gray-200 border border-gray-300 rounded-lg \" readonly>\n                                            </div>\n                                            \n                                        </div>\n                                   \n                                    </div>\n                                    \n                                \n                                    <!-- Sélection principale -->\n                                    <div  id=\"infosACompleter\" class=\" infosACompleter hidden\" >\n                                        <fieldset class=\" mt-2 \">\n                                            {{--  <legend class=\"px-3 py-1 font-semibold text-white bg-primary1 border-b border-gray-300 rounded-t-lg\">\n                                                Formulaire prestation #1\n                                            </legend>  --}}\n                                            {{--  <button class=\"toggle-form\">\n                                                Afficher/Masquer\n                                            </button>  --}}\n                                            {{--  <div  class=\"p-2 border-2 border-primary1 rounded-md\">\n                                            </div>  --}}\n                                            \n                                                <div class=\"relative w-4/5 mx-auto flex py-5 items-center\">\n                                                    <div class=\"flex-grow border-t  border-4 border-gray-400\"></div>\n                                                    <span class=\"flex-shrink mx-4 text-primary1 font-bold text-base\"> A compléter</span>\n                                                    <div class=\"flex-grow border-t border-4 border-gray-400\"></div>\n                                                </div>\n                                                \n                                                <div id=\"acteContainer\" class=\"acteContainer hidden \">\n                                                    <div class=\"flex space-x-6\">\n                                            \n                                                        <div class=\"w-1/2 \">\n                                                            <label for=\"idPrestation\" class=\"block mb-2 text-sm font-medium text-gray-900\">Identifiant prestation :</label>\n                                                            <input id=\"idPrestation\" name=\"idPrestation\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" placeholder=\"Entrez l'identifiant de la prestation\" required>\n                                                        </div>\n                                                        <div class=\"w-1/2 \">\n                                                            <label for=\"contactPrestation\" class=\"block mb-2 text-sm font-medium text-gray-900\">Téléphone :</label>\n                                                            <input id=\"contactPrestation\" name=\"contactPrestation\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" placeholder=\"Entrez un numéro de téléphone pour le paiement\" required>\n                                                        </div>\n    \n                                                    </div>\n                                                \n                                                </div>\n                                                <div id=\"form-container\">\n                                                    <div class=\"form-prestation rounded-md  !mt-2 bg-gray-100 shadow-lg  border\">\n                                                        <div class=\"w-full p-2 rounded-t-md bg-gray-300 flex items-center justify-between cursor-pointer\" id=\"accordion-header\">\n                                                            <label for=\"form\" id=\"label\" class=\"block text-bold text-sm font-medium text-gray-900\">Prestation #1</label>\n                                                            <span id=\"toggle-icon\" class=\"text-lg\">+</span>\n                                                        </div>\n                                                        <div class=\"p-4 \" id=\"accordion-content\">\n    \n                                                            <label for=\"acte\" class=\"block mb-2 text-sm font-medium text-gray-900\">Sélectionnez une option :</label>\n                                                            <select id=\"acte\" name=\"acte\" class=\"acte-select block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                <option value=\"\">-- Choisir --</option>\n                                                                <option value=\"consultation\">Consultation</option>\n                                                                <option value=\"hospitalisation\">Hospitalisation</option>\n                                                                <option value=\"analyse_biomedicale\">Analyse biomédicale</option>\n                                                                <option value=\"radio\">Imagerie médicale</option>\n                                                                <option value=\"pharmacie\">Pharmacie</option>\n                                                                <option value=\"maternite\">Maternité</option>\n                                                                <option value=\"optique\">Optique</option>\n                                                                <option value=\"dentaire_auditif\">Dentaire et auditif</option>\n                                                                <option value=\"allocation\">Allocation</option>\n                                                                <option value=\"autre\">Autre</option>\n            \n                                                            </select>\n                                                            <!-- Options spécifiques -->\n                                                            <div id=\"consultationOptions\" class=\"options consultation hidden\">\n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Consultation</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\" name=\"date_consultation\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_consultation\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                <label class=\"block mb-2 text-sm font-medium text-gray-900\">Type de consultation :</label>\n                                                                <select  id=\"typeConsultation\" name=\"type_consultation\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                    <option value=\"\">-- Sélectionner le type de consultation --</option>\n                                                                    <option value=\"infirmier\">Infirmier</option>\n                                                                    <option value=\"MG\">Médecin généraliste</option>\n                                                                    <option value=\"kinetherapeutre\">Kinéthérapeutre</option>\n                                                                    <option value=\"dentiste\">Dentiste</option>\n                                                                    <option value=\"specialiste\">Spécialiste</option>\n                                                                </select>\n                                                                <div id=\"specialiteContainer\" class=\"hidden\">\n                                                                    <label class=\"block mb-2 text-sm font-medium text-gray-900\">Spécialiste :</label>\n                                                                    <select  name=\"sous_type_consultation\" id=\"specialiteMedicale\" name=\"specialiteMedicale\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                        <option value=\"\">-- Sélectionner la spécialité --</option>\n                                                                        <option value=\"Cardiologie\">Cardiologie</option>\n                                                                        <option value=\"Chirurgie Pédiatrique\">Chirurgie Pédiatrique</option>\n                                                                        <option value=\"Chirurgie Générale\">Chirurgie Générale</option>\n                                                                        <option value=\"Dermatologie\">Dermatologie</option>\n                                                                        <option value=\"Diabète et Endocrinologie\">Diabète et Endocrinologie</option>\n                                                                        <option value=\"Gastro-entérologie\">Gastro-entérologie</option>\n                                                                        <option value=\"Gynécologie\">Gynécologie</option>\n                                                                        <option value=\"Urologie\">Urologie</option>\n                                                                        <option value=\"médecine interne\">Médecine Interne</option>\n                                                                        <option value=\"MPR\">Médecine Physique et de Réadaptation (MPR)</option>\n                                                                        <option value=\"Nephrologie\">Néphrologie</option>\n                                                                        <option value=\"Neurochirurgie\">Neurochirurgie</option>\n                                                                        <option value=\"Neurologie\">Neurologie</option>\n                                                                        <option value=\"Ophtalmologie\">Ophtalmologie</option>\n                                                                        <option value=\"ORL\">ORL</option>\n                                                                        <option value=\"Pédiatrie\">Pédiatrie</option>\n                                                                        <option value=\"Pneumologie\">Pneumologie</option>\n                                                                        <option value=\"Psychiatrie\">Psychiatrie</option>\n                                                                        <option value=\"Rhumatologie\">Rhumatologie</option>\n                                                                        <option value=\"Traumatologie\">Traumatologie</option>\n                                                                    </select>\n                                                                </div>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\"   class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\"  name=\"montant_consultation\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \"  >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                                            \n                                                            <div id=\"hospitalisationOptions\" class=\"hospitalisation options hidden\">\n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Hospitalisation</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\" name=\"date_hospitalisation\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_hospitalisation\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                <label class=\"block mb-2 text-sm font-medium text-gray-900\">Durée :</label>\n                                                                <select name=\"type_hospitalisation\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                    <option value=\"\">-- Sélectionner la durée --</option>\n                                                                    <option value=\"inf-2-jours\">Inférieur à 2 jours</option>\n                                                                    <option value=\"2-7-jours\">2 à 7 jours</option>\n                                                                    <option value=\"7-14-jours\">7 à 14 jours</option>\n                                                                    <option value=\"15-plus-jours\">15 jours et plus</option>\n                                                                </select>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\" name=\"montant_hospitalisation\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple accept=\".pdf\" class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                \n                                                            </div>\n                                \n                                                            <div id=\"analyseBiomedicaleOptions\" class=\"options analyse_biomedicale hidden\">\n                                                                \n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Analyse biomédicale</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\"  name=\"date_analyse_biomedicale\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_analyse_biomedicale\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                \n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\"  name=\"montant_analyse_biomedicale\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                                            \n                                                            <div id=\"radioOptions\" class=\"options radio hidden\">\n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Radio</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\" name=\"date_radio\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_radio\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                <label class=\"block mb-2 text-sm font-medium text-gray-900\">Type :</label>\n                                                                <select name=\"type_radio\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                    <option value=\"\">-- Sélectionner le type de radiographie --</option>\n                                                                    <option value=\"radio-standard\">Radio standard</option>\n                                                                    <option value=\"echo\">Échographie</option>\n                                                                    <option value=\"echo-doppler\">Échographie Doppler</option>\n                                                                    <option value=\"ecg\">ECG</option>\n                                                                    <option value=\"endoscopie\">Endoscopie</option>\n                                                                    <option value=\"irm\">IRM</option>\n                                                                    <option value=\"scanner\">Scanner</option>\n                                                                </select>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\" name=\"montant_radio\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                \n                                                            <div id=\"pharmacieOptions\" class=\"options pharmacie hidden\">\n                                                                \n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Pharmacie</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\"  name=\"date_pharmacie\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_pharmacie\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                \n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\"  name=\"montant_pharmacie\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                                            \n                                                            <div id=\"materniteOptions\" class=\"options maternite hidden\">\n                                                                \n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Maternité</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\"  name=\"date_maternite\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_maternite\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                <label class=\"block mb-2 text-sm font-medium text-gray-900\">Type :</label>\n                                                                <select name=\"type_maternite\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                    <option value=\"\">-- Sélectionner le type de maternité --</option>\n                                                                    <option value=\"naissance-vivante\">Naissance vivante</option>\n                                                                    <option value=\"deces\">Décès</option>\n                                                                </select>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\"  name=\"montant_maternite\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                \n                                                            <div id=\"optiqueOptions\" class=\"options optique hidden\">\n                                                                \n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Optique</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\"  name=\"date_optique\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_optique\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                \n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\"  name=\"montant_optique\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                                            \n                                                            <div id=\"dentaireAuditifOptions\" class=\"options dentaire_auditif hidden\">\n                                                                \n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Dentaire et auditif</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\"  name=\"date_dentaire_auditif\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_dentaire_auditif\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                \n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\"  name=\"montant_dentaire_auditif\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                \n                                                            <div id=\"allocationOptions\" class=\"options allocation hidden\">\n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Allocation</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\"  name=\"date_allocation\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_allocation\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                <label class=\"block mb-2 text-sm font-medium text-gray-900\">Type :</label>\n                                                                <select name=\"type_allocation\" id=\"allocationType\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                    <option value=\"\">-- Sélectionner le type d&apos;allocation --</option>\n                                                                    <option value=\"invalidite\">Invalidité</option>\n                                                                    <option value=\"deces-adherent\">Décès adhérent</option>\n                                                                    <option value=\"deces-ayant-droit\">Décès ayant droit</option>\n                                                                    <option value=\"secours-medical\">Secours Médical</option>\n                                                                </select>\n                                                                \n                                                                <div id=\"secoursMedicalDetail\" class=\"hidden mt-2\">\n                                                                    <label class=\"block mb-2 text-sm font-medium text-gray-900\">Détail :</label>\n                                                                    <select name=\"sous_type_allocation\" id=\"secoursMedicalDetailSelect\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg\">\n                                                                        <option value=\"\">-- Sélectionner le sous-type d&apos;allocation --</option>\n                                                                        <option value=\"mld\">Drainage lymphatique manuel (MLD)</option>\n                                                                        <option value=\"soin-exceptionnel\">Soin exceptionnel</option>\n                                                                        <option value=\"soin-non-couvert\">Soin non couvert</option>\n                                                                    </select>\n                                                                </div>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\" name=\"montant_allocation\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple accept=\".pdf\" class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                                            <div id=\"autreOptions\" class=\"options autre hidden\">\n                                                                \n                                                                <h3 class=\"mb-2 text-xl font-semibold\">Autre</h3>\n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"date\" class=\"block mb-2 text-sm font-medium text-gray-900\">Date :</label>\n                                                                        <input id=\"date\"  name=\"date_autre\" type=\"date\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"centre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Centre de santé :</label>\n                                                                        <input id=\"centre\" name=\"centre_autre\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                                <div class=\"w-full\">\n                                                                    <label for=\"type_autre\" class=\"block mb-2 text-sm font-medium text-gray-900\">Détails :</label>\n                                                                    <input id=\"type_autre\" name=\"type_autre\" type=\"text\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                </div>\n                                                            \n                                                                \n                                                                <div class=\"flex space-x-6\">\n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"montant\" class=\"block mb-2 text-sm font-medium text-gray-900\">Montant :</label>\n                                                                        <input id=\"montant\"  name=\"montant_autre\" type=\"number\" class=\"block w-full p-2 mb-4 border border-gray-300 rounded-lg \" >\n                                                                    </div>\n                                                                    \n                                                                    <div class=\"w-1/2\">\n                                                                        <label for=\"preuve\" class=\"block mb-2 text-sm font-medium text-gray-900\">Preuve :</label>\n                                                                        <input id=\"preuve\" name=\"preuve[]\" type=\"file\" multiple class=\"block w-full p-2 mb-4 text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\">\n                                                                    </div>\n                                                                    \n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                        </fieldset>\n                                \n                                        \n                                    </div>\n                                    <div class=\" flex justify-end\">\n                                        <x-primary-button type=\"button\" id=\"add-form\" class=\"mt-4\">\n                                            Ajouter une autre prestation\n                                        </x-primary-button>\n                                    \n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n    \n                    </div>\n                    <div class=\"flex items-end justify-end gap-4 mt-8\">\n                        \n                        <x-primary-button type=\"submit\" class=\"mt-4 \">\n                            Valider\n                        </x-primary-button>\n                    </div>\n                </form>\n                <script>\n                    let formIndex = 1; \n    \n                    function initializeAccordion(form) {\n                        const accordionHeader = form.querySelector('#accordion-header'); \n                        const accordionContent = form.querySelector('#accordion-content');\n                        const toggleIcon = form.querySelector('.toggle-icon');\n                \n                        accordionHeader.addEventListener('click', function() {\n                            accordionContent.classList.toggle('hidden');\n                            toggleIcon.textContent = accordionContent.classList.contains('hidden') ? '+' : '-';\n                        });\n                    }\n                \n                    document.addEventListener('DOMContentLoaded', function() {\n                        const firstForm = document.querySelector('.form-prestation');\n                        initializeAccordion(firstForm); \n                    });\n    \n                \n                    document.getElementById('add-form').addEventListener('click', function() {\n                        const formContainer = document.getElementById('form-container');\n                        const newForm = document.querySelector('.form-prestation').cloneNode(true);\n                        \n                        // Créer un bouton \"Supprimer\" pour le nouveau formulaire\n                        const deleteButton = document.createElement('button');\n                        deleteButton.className = 'bg-red-500 text-white p-2 text-xs rounded delete-form-btn';\n                        deleteButton.textContent = 'Supprimer';\n                        \n                        formIndex++;\n    \n                        // Réinitialiser les champs du nouveau formulaire\n                        newForm.querySelectorAll('input, select').forEach(function(element) {\n                            const name = element.getAttribute('name');\n                            const id = element.getAttribute('id');\n                            const label = newForm.querySelector('label'); \n    \n                            label.textContent = `Prestation #${formIndex}`;\n                            if (name) {\n                                element.setAttribute('name', `${name}-${formIndex}`);\n                            }\n                            if (id) {\n                                element.setAttribute('id', `${id}-${formIndex}`);\n                            }\n                        \n                            if (element.tagName === 'SELECT') {\n                                element.selectedIndex = 0;\n                            } else if (element.type === 'text' || element.type === 'number' || element.type === 'file' || element.type === 'date') {\n                                element.value = ''; \n                            } else if (element.type === 'checkbox' || element.type === 'radio') {\n                                element.checked = false; \n                            }\n                        \n                            if (element.id === 'contactPrestation-1') {\n                                console.log(\"ID du champ contactPrestation:\", element.id);\n                            }\n                        });\n                        \n                        initializeAccordion(newForm);\n    \n                \n                        {{--  newForm.querySelector('.acteContainer').classList.remove('hidden');    --}}\n                        formContainer.appendChild(newForm);\n    \n    \n                        {{--  let acteSelect = null;   --}}\n                        hideAllOptions(newForm); \n    \n                        acteSelect = newForm.querySelector('.acte-select'); \n                        console.log('Acte sélectionné:', acteSelect);\n    \n                        if (acteSelect) {\n                            acteSelect.addEventListener('change', function() {\n                                {{--  if (acteTitle) {\n                                    acteTitle.textContent = this.value || ''; // Mettre à jour le titre\n                                }  --}}\n                            });\n                        }\n                        if (acteSelect) {\n                            acteSelect.addEventListener('change', function() {\n                                showSelectedOption(acteSelect); \n                            });\n                            console.log('Acte selectionné:', acteSelect);\n                            if (acteSelect.value) {\n                                showSelectedOption(acteSelect); \n                            }\n                        }\n\n                        deleteButton.addEventListener('click', function() {\n                            formContainer.removeChild(newForm);\n                            updateFormIndices(formContainer);\n\n                        });\n                \n                    });\n    \n                    function showSelectedOption(acteSelect) {\n                        const form = acteSelect.closest('.form-prestation'); \n                        \n                        hideAllOptions(form); \n                \n                        const selectedOption = acteSelect.value;\n                        if (selectedOption) {\n                            const optionToShow = form.querySelector('.' + selectedOption); \n                            if (optionToShow) {\n                                optionToShow.classList.remove('hidden');\n                            } else {\n                                console.error('Option manquante pour:', selectedOption);\n                            }\n                        }\n                    }\n                \n                    function hideAllOptions(form) {\n                        form.querySelectorAll('.options').forEach(function(option) {\n                            option.classList.add('hidden'); \n                        });\n                    }\n                \n                    document.querySelectorAll('.acte-select').forEach(function(acteSelect) {\n                        acteSelect.selectedIndex = 0;\n                        acteSelect.addEventListener('change', function() {\n                            showSelectedOption(acteSelect); \n                        });\n                \n                    });\n                </script>\n                \n                \n                <script defer>\n                    document.addEventListener('DOMContentLoaded', () => {\n                        const adherentCode = document.getElementById('adherentCode');\n                        const acteContainer = document.getElementById('acteContainer');\n    \n                        const consultationOptions = document.getElementById('consultationOptions');\n                        const hospitalisationOptions = document.getElementById('hospitalisationOptions');\n                        const analyseBiomedicaleOptions = document.getElementById('analyseBiomedicaleOptions');\n            \n                        const radioOptions = document.getElementById('radioOptions');\n                        const pharmacieOptions = document.getElementById('pharmacieOptions');\n            \n                        const materniteOptions = document.getElementById('materniteOptions');\n                        const optiqueOptions = document.getElementById('optiqueOptions');\n                        const dentaireAuditifOptions = document.getElementById('dentaireAuditifOptions');\n            \n                        const allocationOptions = document.getElementById('allocationOptions');\n                        const secoursMedicalDetail = document.getElementById('secoursMedicalDetail');\n                        var adherents = @json($adherents); \n                        var ayantsDroit = @json($ayantsDroit); \n                        \n                        const adherentInfo = document.getElementById('adherentInfo');\n                        const beneficiaireIndicator = document.getElementById('beneficiaire');\n                        const infosACompleter = document.getElementById('infosACompleter');\n    \n                        \n                        \n                        $('#adherentCode').on('change', function() {\n                            const selectedCode = $(this).val(); // Récupérer la valeur sélectionnée\n                            const selectedAdherent = adherents.find(adherent => adherent.code_carte === selectedCode);\n                    \n                            if (selectedAdherent) {\n                                document.getElementById('adherentNom').value = selectedAdherent.nom;\n                                document.getElementById('adherentPrenom').value = selectedAdherent.prenom;\n                                document.getElementById('adherentSexe').value = selectedAdherent.genre;\n                                beneficiaireIndicator.value = 'Adhérant';\n                    \n                                acteContainer.classList.remove('hidden');\n                                adherentInfo.classList.remove('hidden');\n                                infosACompleter.classList.remove('hidden');\n    \n                            } else {\n                                const selectedAyantDroit = ayantsDroit.find(ayantDroit => ayantDroit.code === selectedCode);\n                    \n                                if (selectedAyantDroit) {\n                                    document.getElementById('adherentNom').value = selectedAyantDroit.nom;\n                                    document.getElementById('adherentPrenom').value = selectedAyantDroit.prenom;\n                                    document.getElementById('adherentSexe').value = selectedAyantDroit.genre;\n                                    beneficiaireIndicator.value = 'Ayant Droit';\n                    \n                                    acteContainer.classList.remove('hidden');\n                                    adherentInfo.classList.remove('hidden');\n                                    infosACompleter.classList.remove('hidden');\n    \n                                } else {\n                                    // Réinitialiser les champs si aucun adhérant ou ayant droit trouvé\n                                    document.getElementById('adherentNom').value = '';\n                                    document.getElementById('adherentPrenom').value = '';\n                                    document.getElementById('adherentSexe').value = '';\n                                    beneficiaireIndicator.value = 'Non trouvé';\n                    \n                                    acteContainer.classList.add('hidden');\n                                    acte.value = '';\n                                    hideAllOptions();\n                                }\n                            }\n                        });\n                        \n                        typeConsultation.addEventListener('change', () => {\n                            if (typeConsultation.value === 'specialiste') {\n                                specialiteContainer.classList.remove('hidden');\n                            } else {\n                                specialiteContainer.classList.add('hidden');\n                            }\n                        });\n                        \n                        allocationType.addEventListener('change', () => {\n                            const selectedValue = allocationType.value;\n                            \n                            secoursMedicalDetail.classList.add('hidden');\n                            \n                            if (selectedValue === 'secours-medical') {\n                                secoursMedicalDetail.classList.remove('hidden');\n                            }\n                        });\n                        \n                        \n                        \n                    });\n                </script>\n                <script>\n                    function validateForm(form) {\n                        let isValid = true; \n                        const inputs = form.querySelectorAll('input, select, textarea'); \n    \n                        inputs.forEach((input) => {\n                            if (input.name && input.name.startsWith('preuve')) {\n                                return; \n                            }\n                            if (!input.closest('.hidden') && (input.type !== 'checkbox' && input.type !== 'radio')) {\n                                if (input.value.trim() === '') {\n                                    isValid = false; \n                                    input.classList.add('border-red-500'); \n                                } else {\n                                    input.classList.remove('border-red-500'); \n                                }\n                            }\n                            \n                            if (input.type === 'checkbox' || input.type === 'radio') {\n                                const groupName = input.name; \n                                const isChecked = form.querySelector(`input[name=\"${groupName}\"]:checked`);\n                                if (!isChecked) {\n                                    isValid = false; \n                                    input.classList.add('border-red-500'); \n                                } else {\n                                    input.classList.remove('border-red-500'); \n                                }\n                            }\n                        });\n    \n                        return isValid; \n                    }\n    \n                    document.getElementById('formPrestation').addEventListener('submit', function(event) {\n                        event.preventDefault(); \n    \n                        const form = this; \n                        if (validateForm(form)) {\n                            form.submit(); \n                        } else {\n                            alert('Veuillez remplir tous les champs requis.'); \n                        }\n                    });\n    \n                    $(document).ready(function() {\n                        $('#adherentCode').select2({\n                            placeholder: '-- Choisir un code --',\n                            width: '100%',\n                            language: {\n                                noResults: function() {\n                                    return \"Aucun résultat trouvé\";\n                                }\n                            }\n                        });\n                    \n                        \n                    });\n                                         \n                </script>              \n            </div>\n        </div>\n    </x-content-page>\n    \n</x-app-layout>\n"
        }
    ]
}