{
    "sourceFile": "resources/views/pages/backend/adherents/index.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1732793802721,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1732793802721,
            "name": "Commit-0",
            "content": "<x-app-layout>\n    <x-sidebar/>\n    @if ($errors->any())\n        <div class=\"alert alert-danger\">\n            <ul>\n                @foreach ($errors->all() as $error)\n                    <li>{{ $error }}</li>\n                @endforeach\n            </ul>\n        </div>\n    @endif\n\n    @if (session('success'))\n    <x-succes-notification>\n        {{ session('success') }}\n    </x-succes-notification>\n    <script>\n        document.addEventListener('DOMContentLoaded', function () {\n            const notification = document.getElementById('success-notification-content');\n            const closeBtn = document.getElementById('close-notification');\n            \n            notification.classList.remove('hidden');\n            \n            {{--  setTimeout(() => {\n                notification.classList.add('hidden');\n            }, 5000);  --}}\n            \n            closeBtn.addEventListener('click', () => {\n                notification.classList.add('hidden');\n            });\n        });\n    </script>\n    @endif\n\n    @role('agentsaisie|controleur')\n    <x-content-page>\n        <div class=\"flex-1 p-6\">\n            <x-breadcrumb :breadcrumbItems=\"$breadcrumbsItems\" />\n            <x-header>\n                {{$pageTitle}}\n            </x-header>\n            \n    \n            <!-- Tabs Navigation -->\n            <div class=\"flex mt-4\">\n                <button id=\"tab-mutualistes\" class=\"w-1/3 py-2 text-center text-gray-600 border-b-2 border-transparent focus:outline-none hover:text-gray-800 hover:border-gray-300 active-tab\">Mutualistes</button>\n                <button id=\"tab-adherents\" class=\"w-1/3 py-2 text-center text-gray-600 border-b-2 border-transparent focus:outline-none hover:text-gray-800 hover:border-gray-300 \">Adhérents</button>\n                <button id=\"tab-ayants-droit\" class=\"w-1/3 py-2 text-center text-gray-600 border-b-2 border-transparent focus:outline-none hover:text-gray-800 hover:border-gray-300\">Ayants Droit</button>\n    \n            </div>\n            <!-- Tabs Content -->\n            <div id=\"tab-adherents-content\" class=\"hidden mt-2 tab-content\">\n                <div class=\"\">\n                    <div class=\"flex items-center justify-end py-2 mb-6 space-x-2 text-sm\">\n                        <div class=\"flex items-center space-x-2\">\n                            \n                            <a href=\"{{ route('adherents.create') }}\">\n                                <x-primary-button class=\"\">\n                                    {{ __('Ajouter') }}\n                                </x-primary-button>\n                            </a>\n                           \n                        </div>\n                        <!-- Custom search input -->\n                        <div class=\"relative mt-1\">\n                            <input type=\"text\" id=\"fSearch\" name=\"fSearch\" class=\"block pt-2 text-sm text-gray-900 border border-gray-300 rounded-lg ps-10 w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\" placeholder=\"Rechercher\">\n                            <div class=\"absolute inset-y-0 flex items-center pointer-events-none rtl:inset-r-0 start-0 ps-3\">\n                                <svg class=\"w-4 h-4 text-gray-500 dark:text-gray-400\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\">\n                                    <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z\"></path>\n                                </svg>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div>\n                        <ul class=\"flex overflow-x-auto border-b border-gray-700\" id=\"myTab\" role=\"tablist\">\n                            @foreach($sheets as $yearMonth => $data)\n                                <li class=\"flex-none\" role=\"presentation\">\n                                    <button class=\"nav-link text-sm border-gray-300 border-2 px-4 py-2 rounded-t-lg {{ $loop->first ? 'bg-primary1 text-white' : 'bg-gray-200 text-gray-600 hover:bg-gray-300' }}\" id=\"tab-{{ $yearMonth }}-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#tab-{{ $yearMonth }}\" type=\"button\" role=\"tab\" aria-controls=\"tab-{{ $yearMonth }}\" aria-selected=\"{{ $loop->first ? 'true' : 'false' }}\">\n                                        {{ $yearMonth }}\n                                    </button>\n                                </li>\n                            @endforeach\n                        </ul>\n                        <div class=\"tab-content \" id=\"myTabContent\">\n                            @foreach($sheets as $yearMonth => $data)\n                                <div class=\"tab-pane {{ $loop->first ? 'block' : 'hidden' }}\" id=\"tab-{{ $yearMonth }}\" role=\"tabpanel\" aria-labelledby=\"tab-{{ $yearMonth }}-tab\">\n                                    \n                                    <div id=\"tabulator-{{ $yearMonth }}\" class=\"w-full p-2 overflow-x-auto bg-white rounded-b-lg shadow-lg\">\n                                        <!-- Tabulator table will be initialized here -->\n                                    </div>\n                                    <div class=\"flex justify-end mt-2 space-x-2\">\n                                        {{--  <x-primary-button class=\"print-btn\" data-year-month=\"{{ $yearMonth }}\">\n                                            {{ __('Imprimer') }}\n                                        </x-primary-button>  --}}\n                                        <x-primary-button class=\"export-btn\" data-year-month=\"{{ $yearMonth }}\">\n                                            {{ __('Exporter en XLSX') }}\n                                        </x-primary-button>\n                                    </div>\n                                </div>\n                            @endforeach\n                        </div>\n                    </div>\n                </div>\n                \n               \n                \n                \n                <form action=\"{{ route('import-csv') }}\" method=\"POST\" enctype=\"multipart/form-data\">\n                    @csrf\n                    <div class=\"flex items-center justify-end my-4 space-x-2\">\n                        <input type=\"file\" name=\"excel-file\" class=\"block text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-green-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\" accept=\".csv, .xlsx\" />\n                        <x-primary-button type=\"submit\" class=\"ms-3\">\n                            {{ __('Importer en XLSX') }}\n                        </x-primary-button>\n                    </div>\n                </form>\n    \n            </div>\n            <!-- Modal de confirmation -->\n            <div id=\"confirmationModal\" class=\"hidden fixed z-10 inset-0 overflow-y-auto bg-black bg-opacity-60\" aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n                <div class=\"flex items-center justify-center min-h-screen\"> \n                    <div class=\"bg-white text-sm rounded-md shadow-md p-6 relative w-[90%] sm:w-[460px]\">\n                        <div class=\"p-3 text-center\">\n                            <i  class=\"fa fa-times-circle   text-red-500 mx-auto\" style=\"font-size:48px;\"></i>\n                            <div class=\"mt-5 text-2xl\">Etes-vous sûr?</div>\n                            <div class=\"mt-2 text-slate-500\">\n                                <p id=\"modalMessage\" class=\"mt-2\"></p>\n    \n                                Cette action est irreversible.\n                            </div>\n                        </div>\n                        <div class=\"flex space-x-2 items-center mx-auto justify-center px-5 pb-8 text-center\">\n                            <button id=\"confirmDeleteBtn\" class=\"bg-red-500 text-white px-4 py-2 rounded\">Confirmer</button>\n    \n                            <div>\n                                <button id=\"cancelDeleteBtn\" class=\"transition duration-200 border shadow-sm inline-flex items-center justify-center py-2 px-3 rounded-md font-medium cursor-pointer focus:ring-4 focus:ring-primary focus:ring-opacity-20 dark:focus:ring-slate-700 dark:focus:ring-opacity-50 border-secondary text-slate-500 dark:border-darkmode-100/40 dark:text-slate-300 mr-1 w-24\">\n                                    Annuler\n                                </button>\n                            </div>\n                            <div>\n                \n                            </div>\n                        </div>\n                        <button id=\"close-modal-icon\" class=\"absolute top-2 right-2 text-gray-500 hover:text-gray-700\">\n                            <i class=\"fas fa-times\"></i>\n                        </button>\n                        \n                    </div>\n                </div>\n            </div>\n    \n            \n            <script>\n                document.addEventListener('DOMContentLoaded', function() {\n                    const tabulators = {};\n                    const baseUrl = @json(route('adherents.edit', ['adherent' => ':id']));\n    \n                    @foreach($sheets as $yearMonth => $data)\n                        tabulators[\"{{ $yearMonth }}\"] = new Tabulator(\"#tabulator-{{ $yearMonth }}\", {\n                            data: @json($data),\n                            layout: \"fitDataStretch\",\n                            movableColumns: false,\n                            placeholder: \"Aucune donnée\",\n                            pagination: \"local\",\n                            paginationSize: 20,\n                            paginationSizeSelector: [20, 30, 40, 50],\n                            printAsHtml: true,\n                            columns: [\n                                @foreach($header as $column)\n                                    { title: \"{{ ucfirst($column) }}\", field: \"{{ $column }}\" },\n                                @endforeach\n                                {\n                                    title: \"Actions\", \n                                    formatter: function(cell) {\n                                        const rowData = cell.getData();\n    \n                                        const editUrl = baseUrl.replace(':id', rowData.id);\n    \n                                        return `\n                                            <a href=\"${editUrl}\" class='border border-indigo-500 shadow-lg rounded-lg text-bold text-white p-1  bg-indigo-500 btn btn-primary'>Modifier</a>\n                                            <button class='border border-red-500 rounded-lg bg-red-800 shadow-lg btn btn-danger text-bold text-white p-1' data-id=\"${rowData.id}\">Supprimer</button>\n                                        `;\n                                    },\n                                    hozAlign: \"center\",\n                                    minWidth: 200,\n                                    cellClick: function(e, cell) {\n                                        const target = e.target;\n                                        const rowData = cell.getData();\n    \n                                        if (target.classList.contains('btn-danger')) {\n                                            showModal(rowData.id); // Appelle la fonction pour afficher la modale de confirmation\n                                        }\n                                    },\n                                    download: false // Exclut cette colonne des exportations\n                                }\n                            ],\n                        });\n                    @endforeach\n    \n                    function showModal(id) {\n                        const modal = document.getElementById('confirmationModal');\n                        modal.classList.remove('hidden');\n    \n                        // Mettez à jour le message de la modale\n                        document.getElementById('modalMessage').innerText = `Êtes-vous sûr de vouloir supprimer l'adhérent avec l'ID: ${id} ?`;\n    \n                        // Générer l'URL de suppression\n                        const baseUrl = @json(route('adherents.destroy', ['adherent' => ':id']));\n                        const deleteUrl = baseUrl.replace(':id', id);\n    \n                        // Ajout de l'événement de suppression\n                        document.getElementById('confirmDeleteBtn').onclick = function() {\n                            fetch(deleteUrl, {\n                                method: 'DELETE',\n                                headers: {\n                                    'Content-Type': 'application/json',\n                                    'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')\n                                }\n                            })\n                            .then(response => {\n                                if (response.ok) {\n                                    console.log('Suppression réussie pour l\\'ID:', id);\n                                    alert('Mutualiste supprimé avec succès.');\n                                    modal.classList.add('hidden');\n                                    location.reload(); // Actualiser la page après suppression\n                                } else {\n                                    return response.json().then(data => {\n                                        console.error('Erreur lors de la suppression:', data.message);\n                                    });\n                                }\n                            })\n                            .catch(error => {\n                                console.error('Erreur lors de la requête de suppression:', error);\n                            });\n                        };\n    \n                        // Gestion du bouton d'annulation\n                        document.getElementById('cancelDeleteBtn').onclick = function() {\n                            modal.classList.add('hidden');\n                        };\n                    }\n    \n    \n                    \n                    \n    \n                    // Script pour gérer le changement d'onglet avec Tailwind CSS\n                    const tabs = document.querySelectorAll('.nav-link');\n                    tabs.forEach(tab => {\n                        tab.addEventListener('click', function() {\n                            document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.add('hidden'));\n                            \n                            tabs.forEach(link => {\n                                link.classList.remove('bg-primary1', 'text-white');\n                                link.classList.add('bg-gray-200', 'text-gray-600');\n                            });\n    \n                            const targetPane = document.querySelector(this.getAttribute('data-bs-target'));\n                            targetPane.classList.remove('hidden');\n    \n                            this.classList.remove('bg-gray-200', 'text-gray-600');\n                            this.classList.add('bg-primary1', 'text-white');\n                        });\n                    });\n    \n                    // Script pour gérer la recherche\n                    document.getElementById('fSearch').addEventListener('input', function() {\n                        const searchValue = this.value.toLowerCase();\n                        Object.values(tabulators).forEach(tabulator => {\n                            tabulator.setFilter(function(data) {\n                                return Object.values(data).some(value => \n                                    String(value).toLowerCase().includes(searchValue)\n                                );\n                            });\n                        });\n                    });\n                    document.querySelectorAll('.print-btn').forEach(button => {\n                        button.addEventListener('click', function() {\n                            const yearMonth = this.getAttribute('data-year-month');\n                            const tabulator = tabulators[yearMonth];\n                            tabulator.printTable();\n                        });\n                    });\n                \n                    // exportation\n                    document.querySelectorAll('.export-btn').forEach(button => {\n                        button.addEventListener('click', function() {\n                            const yearMonth = this.getAttribute('data-year-month');\n                            const tabulator = tabulators[yearMonth];\n                            tabulator.download(\"xlsx\", `adherents_${yearMonth}.xlsx`);\n                        });\n                    });\n                });\n            </script>\n    \n            \n            <div id=\"tab-ayants-droit-content\" class=\"hidden mt-2 tab-content\">\n                <div class=\"\">\n                    <div class=\"flex items-center justify-end py-2 mb-6 space-x-2 text-sm\">\n                        <div class=\"flex items-center space-x-2\">\n                            <a href=\"{{ route('ayantsdroits.create') }}\">\n                                <x-primary-button class=\"\">\n                                    {{ __('Ajouter Ayant Droit') }}\n                                </x-primary-button>\n                            </a>\n                        </div>\n                        <!-- Custom search input -->\n                        <div class=\"relative mt-1\">\n                            <input type=\"text\" id=\"fSearchAyantDroit\" name=\"fSearchAyantDroit\" class=\"block pt-2 text-sm text-gray-900 border border-gray-300 rounded-lg ps-10 w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\" placeholder=\"Rechercher\">\n                            <div class=\"absolute inset-y-0 flex items-center pointer-events-none rtl:inset-r-0 start-0 ps-3\">\n                                <svg class=\"w-4 h-4 text-gray-500 dark:text-gray-400\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 20\">\n                                    <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z\"/>\n                                </svg>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div>\n                        <ul class=\"flex overflow-x-auto border-b border-gray-900\" id=\"myTabAyantDroit\" role=\"tablist\">\n                            @foreach($sheetsAyantsDroits as $yearMonth => $data)\n                                <li class=\"flex-none\" role=\"presentation\">\n                                    <button class=\"nav-link-ayantdroit text-sm border-gray-300 border-2 px-4 py-2 rounded-t-lg {{ $loop->first ? 'bg-primary1 text-white' : 'bg-gray-200 text-gray-600 hover:bg-gray-300' }}\" id=\"tab-{{ $yearMonth }}-ayantdroit-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#tab-{{ $yearMonth }}-ayantdroit\" type=\"button\" role=\"tab\" aria-controls=\"tab-{{ $yearMonth }}-ayantdroit\" aria-selected=\"{{ $loop->first ? 'true' : 'false' }}\">\n                                        {{ $yearMonth }}\n                                    </button>\n                                </li>\n                            @endforeach\n                        </ul>\n                        <div class=\"tab-content\" id=\"myTabAyantDroitContent\">\n                            @foreach($sheetsAyantsDroits as $yearMonth => $data)\n                                <div class=\"tab-pane-ayantdroit {{ $loop->first ? 'block' : 'hidden' }}\" id=\"tab-{{ $yearMonth }}-ayantdroit\" role=\"tabpanel\" aria-labelledby=\"tab-{{ $yearMonth }}-ayantdroit-tab\">\n                                    \n                                    <div id=\"tabulator-{{ $yearMonth }}-ayantdroit\" class=\"w-full p-2 overflow-x-auto bg-white rounded-b-lg shadow-lg\">\n                                        <!-- Tabulator table for Ayants Droit will be initialized here -->\n                                    </div>\n                                    <div class=\"flex justify-end mt-2 space-x-2\">\n                                        <x-primary-button class=\"export-btn-ayantdroit\" data-year-month=\"{{ $yearMonth }}\">\n                                            {{ __('Exporter en XLSX') }}\n                                        </x-primary-button>\n                                    </div>\n                                </div>\n                            @endforeach\n                        </div>\n                    </div>\n                </div>\n    \n                <script>\n                    document.addEventListener('DOMContentLoaded', function() {\n                        const tabulatorsAyantsDroits = {};\n                        const baseUrl = @json(route('ayantsdroits.edit', ['ayantsdroit' => ':id'])); // URL de base\n                        \n                        @foreach($sheetsAyantsDroits as $yearMonth => $data)\n                            tabulatorsAyantsDroits[\"{{ $yearMonth }}\"] = new Tabulator(\"#tabulator-{{ $yearMonth }}-ayantdroit\", {\n                                data: @json($data),\n                                layout: \"fitDataStretch\",\n                                movableColumns: false,\n                                placeholder: \"Aucune donnée\",\n                                pagination: \"local\",\n                                paginationSize: 20,\n                                paginationSizeSelector: [20, 30, 40, 50],\n                                printAsHtml: true,\n                                columns: [\n                                    { \n                                        title: \"N° Ordre\", \n                                        field: \"numero_ordre\", \n                                        formatter: \"rownum\",  \n                                        hozAlign: \"center\", \n                                        headerSort: false \n                                    },\n                                    @foreach($headerAyantDroit as $column)\n                                        { title: \"{{ ucfirst($column) }}\", field: \"{{ $column }}\" },\n                                    @endforeach\n                                    {\n                                        title: \"Actions\", \n                                        \n                                        formatter: function(cell, formatterParams, onRendered) {\n                                                const rowData = cell.getData();\n                                                \n                                                const editUrl = baseUrl.replace(':id', rowData.id); \n    \n                                                return `\n                                                    <a href=\"${editUrl}\" class='border border-indigo-500 shadow-lg rounded-lg text-bold text-white p-1  bg-indigo-500 btn btn-primary'>Modifier</a>\n                                                    <button class='border border-red-500 rounded-lg bg-red-800 shadow-lg btn btn-danger text-bold text-white p-1' data-id=\"${rowData.id}\">Supprimer</button>\n                                                    `;\n                                        },\n                                        hozAlign: \"center\",\n                                        minWidth: 200,\n                                        cellClick: function(e, cell) {\n                                            const target = e.target;\n                    \n                                            if (target.classList.contains('btn-danger')) {\n                                                showModal(target.getAttribute('data-id'));\n                                            }\n                                        },\n                                        download: false \n                                    }\n                                ],\n                            });\n                        @endforeach\n                    \n                        function showModal(id) {\n                            const modal = document.getElementById('confirmationModal');\n                            modal.classList.remove('hidden');\n                        \n                            document.getElementById('modalMessage').innerText = `Êtes-vous sûr de vouloir supprimer l'élément avec l'ID: ${id} ?`;\n                        \n                            const baseUrl = @json(route('ayantsdroits.destroy', ['ayantsdroit' => ':id']));\n                            const deleteUrl = baseUrl.replace(':id', id);\n                        \n                            // suppression\n                            document.getElementById('confirmDeleteBtn').onclick = function() {\n                                fetch(deleteUrl, {\n                                    method: 'DELETE',\n                                    headers: {\n                                        'Content-Type': 'application/json',\n                                        'X-CSRF-TOKEN': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content') // Token CSRF\n                                    }\n                                })\n                                .then(response => {\n                                    if (response.ok) {\n                                        console.log('Suppression confirmée pour l\\'ID:', id);\n                                        alert('Mutualiste supprimé avec succès.');\n    \n                                        modal.classList.add('hidden');\n                        \n                                        location.reload(); \n                                    } else {\n                                        return response.json().then(data => {\n                                            console.error('Erreur lors de la suppression:', data.message);\n                                        });\n                                    }\n                                })\n                                .catch(error => {\n                                    console.error('Erreur lors de la requête de suppression:', error);\n                                });\n                            };\n                        \n                            document.getElementById('cancelDeleteBtn').onclick = function() {\n                                modal.classList.add('hidden');\n                            };\n                        }\n                        \n                        const tabsAyantDroit = document.querySelectorAll('.nav-link-ayantdroit');\n                        tabsAyantDroit.forEach(tab => {\n                            tab.addEventListener('click', function() {\n                                document.querySelectorAll('.tab-pane-ayantdroit').forEach(pane => pane.classList.add('hidden'));\n                                \n                                tabsAyantDroit.forEach(link => {\n                                    link.classList.remove('bg-primary1', 'text-white');\n                                    link.classList.add('bg-gray-200', 'text-gray-600');\n                                });\n                    \n                                const targetPane = document.querySelector(this.getAttribute('data-bs-target'));\n                                targetPane.classList.remove('hidden');\n                    \n                                this.classList.remove('bg-gray-200', 'text-gray-600');\n                                this.classList.add('bg-primary1', 'text-white');\n                            });\n                        });\n                    \n                        // recherche\n                        document.getElementById('fSearchAyantDroit').addEventListener('input', function() {\n                            const searchValue = this.value.toLowerCase();\n                            Object.values(tabulatorsAyantsDroits).forEach(tabulator => {\n                                tabulator.setFilter(function(data) {\n                                    return Object.values(data).some(value => \n                                        String(value).toLowerCase().includes(searchValue)\n                                    );\n                                });\n                            });\n                        });\n                    \n                        // exportation\n                        document.querySelectorAll('.export-btn-ayantdroit').forEach(button => {\n                            button.addEventListener('click', function() {\n                                const yearMonth = this.getAttribute('data-year-month');\n                                const tabulator = tabulatorsAyantsDroits[yearMonth];\n                                tabulator.download(\"xlsx\", `ayantsdroits_${yearMonth}.xlsx`);\n                            });\n                        });\n                    });\n                </script>\n    \n                <form action=\"{{route('ayantdroits.import')}}\" method=\"POST\" enctype=\"multipart/form-data\">\n                    @csrf\n                    <div class=\"flex items-center justify-end my-4 space-x-2\">\n                        <input type=\"file\" name=\"excel-file-ayant-droit\"  class=\"block text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-green-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400\" accept=\".csv, .xlsx\" />\n                        <x-primary-button type=\"submit\" class=\"ms-3\">\n                            {{ __('Importer Excel') }}\n                        </x-primary-button>\n                    </div>\n                </form>\n            </div>\n            <div id=\"tab-mutualistes-content\" class=\"mt-2 tab-content\">\n                <div class=\"\">\n                    \n                    <div class=\"overflow-x-auto rounded-lg\">\n    \n                        <table id=\"table_mutualistes\" class=\"w-full text-sm text-left text-gray-500 border rounded-lg shadow-lg cell-border hover rtl:text-right dark:text-gray-400 display\">\n                            <thead>\n                                <tr class=\"p-3 font-bold \">\n                                    <th class=\"p-3 uppercase\">Nom</th>\n                                    <th class=\"p-3 uppercase\">Prénom (s)</th>\n                                    <th class=\"p-3 uppercase\">Genre</th>\n                                    <th class=\"p-3 uppercase\">Code_carte</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                @foreach($mutualistes as $person)\n                                <tr class=\"font-semibold bg-white border-b cursor-pointer dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\">\n                                    <td class=\"p-3 font-semibold border\">\n                                        <a href=\"{{ route('adherents.show', ['adherent' => $person->id]) }}\">\n                                            {{$person->nom}}\n                                        </a>\n                                    </td>\n                                    <td class=\"p-3 font-semibold border\">\n                                        {{$person->prenom}}\n                                    </td>\n                                    <td class=\"p-3 font-semibold border\">\n                                        {{$person->genre ?? $person->sexe}}\n                                    </td>\n                                    <td class=\"p-3 font-semibold border\">\n                                        {{$person->code_carte ?? $person->code}}\n                                    </td>\n                                </tr>\n                                @endforeach\n                            </tbody>\n                        </table>\n                    </div>\n                    \n                    <script>\n                            $('#table_mutualistes').DataTable( {\n                            buttons: [  \n                                {\n                                    extend: 'excelHtml5',\n                                    title: 'Liste Mutualistes'\n                                },\n                                {\n                                    extend: 'print',\n                                    title: 'Liste Mutualistes'\n                                },\n                            ],\n                            layout: {\n                                topStart: 'buttons'\n                                \n                            },\n     \n                            paging: true,\n                            ordering: true,\n                            info: false,              \n                            searching: true,\n                            lengthChange: true,\n                            lengthMenu: [20, 25, 50, 100],\n                            pagingType: 'simple_numbers',\n                            language: {\n                                processing:     \"Traitement en cours...\",\n                                search:         \"Rechercher&nbsp;:\",\n                                lengthMenu:    \"Afficher _MENU_ &eacute;l&eacute;ments\",\n                                info:           \"Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments\",\n                                infoEmpty:      \"Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments\",\n                                infoFiltered:   \"(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)\",\n                                infoPostFix:    \"\",\n                                loadingRecords: \"Chargement en cours...\",\n                                zeroRecords:    \"Aucun &eacute;l&eacute;ment &agrave; afficher\",\n                                emptyTable:     \"Aucune donnée disponible dans le tableau\",\n                                paginate: {\n                                    first:      \"Premier\",\n                                    previous:   \"Pr&eacute;c&eacute;dent\",\n                                    next:       \"Suivant\",\n                                    last:       \"Dernier\"\n                                },\n                                aria: {\n                                    sortAscending:  \": activer pour trier la colonne par ordre croissant\",\n                                    sortDescending: \": activer pour trier la colonne par ordre décroissant\"\n                                }\n                            }\n                            \n                        } );\n                    </script>\n                </div>\n                \n                \n               \n            </div>\n            \n        </div>\n    </x-content-page>\n\n    @endrole\n    <script>\n        document.getElementById('tab-adherents').addEventListener('click', function() {\n                showTab('adherents');\n            });\n        \n            document.getElementById('tab-ayants-droit').addEventListener('click', function() {\n                showTab('ayants-droit');\n            });\n            document.getElementById('tab-mutualistes').addEventListener('click', function() {\n                showTab('mutualistes');\n            });\n            \n            \n            function showTab(tabName) {\n                var tabs = ['adherents', 'ayants-droit','mutualistes'];\n                tabs.forEach(function(tab) {\n                    var tabButton = document.getElementById('tab-' + tab);\n                    var content = document.getElementById('tab-' + tab + '-content');\n                    if (tab === tabName) {\n                        tabButton.classList.add('active-tab');\n                        content.classList.remove('hidden');\n                    } else {\n                        tabButton.classList.remove('active-tab');\n                        content.classList.add('hidden');\n                    }\n                });\n        \n                {{--  setTimeout(function() {\n                    if (tabName === 'adherents') {\n                        tableAdherents.redraw(true); \n                    } else if (tabName === 'ayants-droit') {\n                        tableAyantsDroit.redraw(true); \n                    }\n                }, 10);   --}}\n            }\n        document.addEventListener('DOMContentLoaded', function() {\n            var header = @json($header); \n            var headerAyantDroit = @json($headerAyantDroit); \n            \n            const input = document.getElementById(\"fSearch\");\n            input.addEventListener(\"keyup\", function() {\n                tableAdherents.setFilter(matchAny, { value: input.value });\n                if (input.value === \"\") {\n                    tableAdherents.clearFilter();\n                }\n            });\n\n            function matchAny(data, filterParams) {\n                var match = false;\n                const regex = RegExp(filterParams.value, 'i');\n                for (var key in data) {\n                    if (regex.test(data[key])) {\n                        match = true;\n                    }\n                }\n                return match;\n            }\n        });\n        \n        \n    </script>\n    \n    \n</x-app-layout>\n\n"
        }
    ]
}