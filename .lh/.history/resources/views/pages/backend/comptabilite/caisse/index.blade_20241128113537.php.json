{
    "sourceFile": ".history/resources/views/pages/backend/comptabilite/caisse/index.blade_20241128113537.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1732794309970,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1732794309970,
            "name": "Commit-0",
            "content": "<x-app-layout>\n    <x-sidebar/>\n    \n    @if (session('success'))\n        <x-succes-notification>\n            {{ session('success') }}\n        </x-succes-notification>\n        <script>\n            document.addEventListener('DOMContentLoaded', function () {\n                const notification = document.getElementById('success-notification-content');\n                const closeBtn = document.getElementById('close-notification');\n                \n                notification.classList.remove('hidden');\n                \n                closeBtn.addEventListener('click', () => {\n                    notification.classList.add('hidden');\n                });\n            });\n        </script>\n    @endif\n\n    <x-content-page>\n        @section('navigation-content')\n            <x-breadcrumb :breadcrumbItems=\"$breadcrumbsItems\" :pageTitle=\"$pageTitle\"/>\n        @endsection      \n\n        <div class=\"flex-1 p-6\">\n            <x-header>\n                {{$pageTitle}}\n            </x-header>\n\n            <div class=\"p-6 mx-auto mt-4 bg-white min-h-screen rounded-b-lg shadow-lg \">\n                <!-- Tabs -->\n                <div class=\"mb-4\">\n                    <ul class=\"flex border-b\">\n                        <li class=\"mr-1\">\n                            <a href=\"#recettes\" class=\"inline-block py-2 px-3 text-blue-600 hover:text-whit text-sm rounded-t-md focus:outline-none tab-link\">\n                                Recettes\n                            </a>\n                        </li>\n                        <li class=\"mr-1\">\n                            <a href=\"#depenses\" class=\"inline-block py-2 px-3 text-blue-600 hover:text-whit text-sm rounded-t-md focus:outline-none tab-link\">\n                                Dépenses\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n\n                <!-- Tous tab content -->\n                <div id=\"recettes\" class=\"tab-content hidden\">\n                    <div class=\"max-w-7xl mx-auto py-6\">\n                        <form method=\"GET\" action=\"{{ route('caisse.index') }}\" class=\"mb-6 flex items-center space-x-4\">\n                            <label for=\"year\" class=\"text-base font-medium\">Sélectionnez l&apos;année:</label>\n                            <select name=\"year\" onchange=\"this.form.submit()\" class=\"form-select block w-[15%] border border-gray-300 rounded-md px-2 py-2\">\n                                @for ($i = 2020; $i <= now()->year; $i++) \n                                    <option value=\"{{ $i }}\" {{ $year == $i ? 'selected' : '' }}>{{ $i }}</option>\n                                @endfor\n                            </select>\n                        </form>\n                        \n    \n            \n                        <div class=\"bg-white p-6 shadow rounded\">\n                            <canvas id=\"recetteChart\"></canvas>\n                        </div>\n                        <script>\n                            var ctx = document.getElementById('recetteChart').getContext('2d');\n                            var recetteChart = new Chart(ctx, {\n                                type: 'bar', \n                                data: {\n                                    labels: @json($categories->pluck('nom')), \n                                    datasets: [{\n                                        label: 'Montant des recettes (en XOF)',\n                                        data: @json(array_values($data)),\n                                        backgroundColor: 'rgba(54, 162, 235, 0.2)', \n                                        borderColor: 'rgba(54, 162, 235, 1)', \n                                        borderWidth: 1\n                                    }]\n                                },\n                                options: {\n                                    responsive: true,\n                                    scales: {\n                                        y: {\n                                            beginAtZero: true // L'axe Y commence à 0\n                                        }\n                                    }\n                                }\n                            });\n                        </script>\n                    </div>\n                </div>\n\n                <div id=\"depenses\" class=\"tab-content hidden\">\n                    \n                    <span class=\"text-sm my-3\">\n                        Caisse nationale\n                    </span>\n                    @if(isset($adherentsCountPerRegion['Centre']))\n                        <div class=\"flex items-center p-4 bg-gray-200 border shadow-lg mb-6\">\n                            <div class=\"w-10 h-10 p-3 mr-4 text-primary1 bg-purple-100 rounded-full flex items-center justify-center\">\n                                <i class=\"fa fa-bank\"></i>\n                            </div>\n                            <div>\n                                <p class=\"mb-2 text-base font-medium text-gray-600\">\n                                    Centre\n                                </p>\n                                <p class=\"text-xs font-semibold text-gray-700\">\n                                    {{ $adherentsCountPerRegion['Centre'] }} adhérents\n                                </p>\n                            </div>\n                        </div>\n                    @endif\n    \n                    <span class=\"text-sm my-3\">\n                        Caisse régionales\n                    </span>\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-3 border-gray-300 divide-y divide-gray-300 lg:divide-y-0 lg:divide-x\">\n                        @foreach($adherentsCountPerRegion as $region => $count)\n                            @if($region !== 'Centre') <!-- S'assurer que la région Centre n'est pas incluse ici -->\n                                <div class=\"flex items-center p-4 bg-white border shadow-lg\">\n                                    <div class=\"w-10 h-10 p-3 mr-4 text-primary1 bg-purple-100 rounded-full flex items-center justify-center\">\n                                        <i class=\"fa fa-bank\"></i>\n                                    </div>\n                                    <div>\n                                        <p class=\"mb-2 text-base font-medium text-gray-600\">\n                                            {{ $region }}\n                                        </p>\n                                        <p class=\"text-xs font-semibold text-gray-700\">\n                                            {{ $count }} adhérents\n                                        </p>\n                                    </div>\n                                </div>\n                            @endif\n                        @endforeach\n                    </div>               \n                </div>\n                <script>\n                    $(document).ready(function() {\n                        $(\"a.tab-link\").on(\"click\", function (e) {\n                            e.preventDefault();\n            \n                            // Retirer la couleur de fond de tous les onglets\n                            $(\"a.tab-link\").removeClass(\"bg-primary1 text-white\").addClass(\"text-blue-600\");\n            \n                            // Ajouter la couleur de fond et changer la couleur du texte de l'onglet actif\n                            $(this).removeClass(\"text-blue-600\").addClass(\"bg-primary1 text-white\");\n            \n                            // Masquer tous les contenus d'onglets et afficher celui sélectionné\n                            $(\".tab-content\").addClass(\"hidden\");\n                            var targetTab = $(this).attr(\"href\");\n                            $(targetTab).removeClass(\"hidden\");\n                        });\n            \n                        $(\"a.tab-link:first\").addClass(\"bg-primary1 text-white\");\n                        $(\".tab-content:first\").removeClass(\"hidden\");\n                    });\n                </script>\n            </div>\n        </div>\n    </x-content-page>\n    \n</x-app-layout>\n"
        }
    ]
}